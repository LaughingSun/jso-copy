/*! jsocopy 2015-07-19 */
function copy(a,b){return deep(a,0,b)}function deep(a,b,c){var d,e,f,g,h,i,j,k,l;if(b instanceof Function&&(c=b),b!==(0|b)&&(b=-1),a instanceof Object){for(d=[],f=(l=a.constructor)!==Object&&NATIVECODE_REGEX.test(l.toString())?a instanceof Array?[]:new a.constructor(a):{},e=getNames(a),g=h=0;;){for(;i=e[g++];)(j=(k=getProp(a,i)).value)instanceof Object?(d[h++]={a:a,b:f,i:g,p:k,names:e},f=create(a=j),e=getNames(a),g=0):setProp(f,i,k);if(!h)break;(k=(args=d[--h]).p).value=f,setProp(f=args.b,(e=args.names)[(g=args.i)-1],k),a=args.a}return f}return a}function clone(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(a instanceof Object){if(b instanceof Function)return clonecb(a,b);c=[],e=[a],h=(p=a.constructor)===Object?{}:p===Array?[]:NATIVECODE_REGEX.test(p.toString())?new a.constructor(a):_create(a),f=[h],i=1,l=0,d={a:a,b:h};do for(g=getNames(a=d.a),h=d.b,k=0;void 0!==(n=g[k++]);)(o=(j=getProp(a,n)).value)instanceof Object&&((m=e.indexOf(o))<0&&(p=(p=o.constructor)===Object?{}:p===Array?[]:NATIVECODE_REGEX.test(p.toString())?new o.constructor(o):_create(o),c[l++]={a:e[m=i]=o,b:f[i++]=p}),j.value=f[m]),setProp(h,n,j);while(d=c[--l]);return f[0]}return a}function clonecb(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q;if(a instanceof Object){c=[],f=[a],i=(q=a.constructor)===Object?{}:q===Array?[]:NATIVECODE_REGEX.test(q.toString())?new a.constructor(a):_create(a),g=[i],j=1,l=0,e={a:a,b:i};do for(h=getNames(a=e.a),i=e.b,k=0;void 0!==(n=h[k++]);)(o=(p=getProp(a,n)).value)instanceof Object&&((m=f.indexOf(o))<0&&(q=(q=o.constructor)===Object?{}:q===Array?[]:NATIVECODE_REGEX.test(q.toString())?new o.constructor(o):_create(o),c[l++]={a:f[m=j]=o,b:g[j++]=q}),p.value=g[m],b(d,n)===!1)||setProp(i,n,p);while(e=c[--l]);return g[0]}return a}function merge(a,b){function c(a,b){var d,e,f,g,i,j,k,l;if(a!==b&&a instanceof Object){if(e=(d=getNames(a)).length,i=-1,h--)for(;++i<e;)(k=(f=getProp(a,j=d[i])).value)instanceof Object&&(b.hasOwnProperty(j)&&(l=(g=getProp(b,j)).value)instanceof Object||(l=_create(k)),f.value=c(k,l)),setProp(b,j,f);else for(;++i<e;)setProp(b,j=d[i],getProp(a,j));return b}return a}function d(a,b){var d,f,g,i,j,k,l,m;if(a!==b&&a instanceof Object){if(f=(d=getNames(a)).length,j=-1,h--)for(;++j<f;)(l=(g=getProp(a,k=d[j])).value)instanceof Object&&(b.hasOwnProperty(k)&&(m=(i=getProp(b,k)).value)instanceof Object||(m=_create(l)),g.value=c(l,m),e(g,k)===!1)||setProp(b,k,g);else for(;++j<f;)e(g=getProp(a,k),k)!==!1&&setProp(b,k=d[j],g);return b}return a}var e,f,g=arguments.length-1,h=0;if(g>=2&&(arguments[g]instanceof Function||null==arguments[g])&&(e=arguments[g--]),g>=2&&(arguments[g]===!0?(h=-1,g--):arguments[g]===(0|arguments[g])&&(h=arguments[g--])),1>g)throw new Error("expects at least 2 operands");if(f=typeof(b=arguments[g]),e instanceof Function){for(;g--;)if(null!=(a=arguments[g])){if(typeof a!==f)throw new Error(["argument #",g," (",typeof a,") cannot be merged with a different type (",f,")"].join(""));d(a,b)}}else for(;g--;)if(null!=(a=arguments[g])){if(typeof a!==f)throw new Error(["argument #",g," (",typeof a,") cannot be merged with a different type (",f,")"].join(""));c(a,b)}return b}function _create(a){var b;return a instanceof Object?(b=a.constructor)===Object?{}:b===Array?[]:NATIVECODE_REGEX.test(b.toString())?new b(a):create(a):a}var NATIVECODE_REGEX=/^function(?:\s+\w+)?\((?:\s*\w+(?:\s*,\s*\w+)*)?\)\s*\{\s*\[native code\]/,getNames=Object.getOwnPropertyNames,setProp=Object.defineProperty,getProp=Object.getOwnPropertyDescriptor,create=Object.create;module.exports=copy,copy.create=_create,copy.copy=copy,copy.deep=deep,copy.clone=clone,copy.merge=merge;